from pathlib import Path
path = Path("src/components/StepPreview.jsx")
text = path.read_text()
start = text.index("  const formatProjects = () => {")
end = text.index("    }).filter(Boolean);", start) + len("    }).filter(Boolean);")
new_block = """  const formatProjects = () => {\n    if (!data.projects || data.projects.length === 0) return null;\n    \n    return data.projects.map((project, idx) => {\n      if (!project.projectName) return null;\n      \n      const contentNode = (\n        <div className=\"experience-item\">\n          <div className=\"institution-header\">\n            {toText(project.projectName)}\n          </div>\n          {project.technologies && (\n            <div className=\"education-details\">\n              {toText(project.technologies)}\n            </div>\n          )}\n          {project.projectUrl && (\n            <div className=\"education-details\">\n              {toText(project.projectUrl)}\n            </div>\n          )}\n          {project.description && (\n            <ul className=\"bullet-points\">\n              {project.description.split('\\n').filter(point => point.trim()).map((point, pointIdx) => (\n                <li key={pointIdx}>\n                  {point.trim().replace(/^[\\u2022\\u25AA-]+\s*/, '')}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      );\n\n      if (isIndustryManager) {\n        return (\n          <div key={idx} className=\"section-item\">\n            <span className=\"section-item-marker\">▪</span>\n            <div className=\"section-item-body\">{contentNode}</div>\n          </div>\n        );\n      }\n\n      return contentNode;\n    }).filter(Boolean);\n  };"""
text = text[:start] + new_block.replace('\n', '\r\n') + text[end:]
path.write_text(text)
